"use strict";(self.webpackChunkbooks=self.webpackChunkbooks||[]).push([[735],{9735:(F,d,c)=>{c.r(d),c.d(d,{BookListModule:()=>y});var a=c(6814),k=c(3781),p=c(9385),t=c(4946),m=c(3414);let g=(()=>{class e{sortBooksByTitle(o,u){return o.sort((i,s)=>u?i.title.localeCompare(s.title):s.title.localeCompare(i.title))}sortBooksByPrice(o,u){return o.sort((i,s)=>{const n=parseFloat(i.price.replace("$","")),l=parseFloat(s.price.replace("$",""));return u?n-l:l-n})}static#t=this.\u0275fac=function(u){return new(u||e)};static#o=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),b=(()=>{class e{searchBooks(o,u){return u.filter(i=>i.title.trim().toLowerCase().includes(o.trim().toLowerCase())||i.subtitle.trim().toLowerCase().includes(o.trim().toLowerCase()))}static#t=this.\u0275fac=function(u){return new(u||e)};static#o=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const f=function(e,r){return{"add-to-cart-button":e,"remove-from-cart-button":r}};function C(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"tr",12)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",13),t.NdJ("click",function(){const s=t.CHM(o).$implicit,n=t.oxw(2);return t.KtG(n.toDetailPage(s.isbn13))}),t._UZ(4,"img",14),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"button",15),t.NdJ("click",function(){const s=t.CHM(o).$implicit,n=t.oxw(2);return t.KtG(n.addToOrRemoveFromCart(s))}),t.qZA()()()}if(2&e){const o=r.$implicit,u=r.index;t.xp6(2),t.Oqu(u+1),t.xp6(2),t.Q6J("src",o.image,t.LSH)("alt",o.title),t.xp6(1),t.hij(" ",o.title," "),t.xp6(2),t.Oqu(o.subtitle),t.xp6(2),t.Oqu(o.price),t.xp6(2),t.Q6J("ngClass",t.WLB(8,f,!o.isInCart,o.isInCart))("textContent",o.isInCart?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")}}function _(e,r){if(1&e&&(t.TgZ(0,"table",10)(1,"tr")(2,"th"),t._uU(3,"#"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"\u0426\u0435\u043d\u0430"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"),t.qZA()(),t.YNc(12,C,12,11,"tr",11),t.qZA()),2&e){const o=r.ngIf;t.xp6(12),t.Q6J("ngForOf",o)}}let v=(()=>{class e{constructor(o,u,i,s,n){this.dataService=o,this.router=u,this.cartService=i,this.sortService=s,this.searchService=n,this.books$=this.dataService.books$}ngOnInit(){this.dataService.getBooks$().subscribe()}searchBooks(o){this.books$.next(this.searchService.searchBooks(o,this.dataService.allBooks$.value))}toDetailPage(o){o&&this.router.navigate(["main",o])}addToOrRemoveFromCart(o){o.isInCart?this.cartService.removeFromCart(o):this.cartService.addToCart(o),o.isInCart=!o.isInCart}sortBooks(o){const u=this.books$.value;if(!u)return;const i=o.target.value;"A-Z"===i?this.books$.next(this.sortService.sortBooksByTitle(u,!0)):"Z-A"===i?this.books$.next(this.sortService.sortBooksByTitle(u,!1)):"lowPrice"===i?this.books$.next(this.sortService.sortBooksByPrice(u,!0)):"highPrice"===i&&this.books$.next(this.sortService.sortBooksByPrice(u,!1))}static#t=this.\u0275fac=function(u){return new(u||e)(t.Y36(k.s),t.Y36(p.F0),t.Y36(m.N),t.Y36(g),t.Y36(b))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-book-list"]],decls:16,vars:3,consts:[[1,"books"],["type","text","placeholder","\u041f\u043e\u0438\u0441\u043a",3,"input"],["inputElement",""],[1,"books-sort",3,"change"],["disabled","","selected",""],["value","A-Z"],["value","Z-A"],["value","lowPrice"],["value","highPrice"],["class","books-table",4,"ngIf"],[1,"books-table"],["class","books-row",4,"ngFor","ngForOf"],[1,"books-row"],[1,"books-title",3,"click"],["width","30px",3,"src","alt"],[1,"books-button",3,"ngClass","textContent","click"]],template:function(u,i){if(1&u){const s=t.EpF();t.TgZ(0,"div",0)(1,"input",1,2),t.NdJ("input",function(){t.CHM(s);const l=t.MAs(2);return t.KtG(i.searchBooks(l.value))}),t.qZA(),t.TgZ(3,"select",3),t.NdJ("change",function(l){return i.sortBooks(l)}),t.TgZ(4,"option",4),t._uU(5,"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443"),t.qZA(),t.TgZ(6,"option",5),t._uU(7,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442 A \u0434\u043e Z"),t.qZA(),t.TgZ(8,"option",6),t._uU(9,"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442 Z \u0434\u043e A"),t.qZA(),t.TgZ(10,"option",7),t._uU(11,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0434\u0435\u0448\u0435\u0432\u044b\u0435"),t.qZA(),t.TgZ(12,"option",8),t._uU(13,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0434\u043e\u0440\u043e\u0433\u0438\u0435"),t.qZA()(),t.YNc(14,_,13,1,"table",9),t.ALo(15,"async"),t.qZA()}2&u&&(t.xp6(14),t.Q6J("ngIf",t.lcZ(15,1,i.books$)))},dependencies:[a.mk,a.sg,a.O5,a.Ov],styles:[".books[_ngcontent-%COMP%]{margin:0 auto;display:flex;align-items:center;justify-content:center;flex-direction:column;max-width:90rem}.books-sort[_ngcontent-%COMP%]{align-self:end;margin:1rem}.books-table[_ngcontent-%COMP%]{margin:0 auto;width:100%}.books-row[_ngcontent-%COMP%]:hover{background-color:#faebd7}.books-title[_ngcontent-%COMP%]:hover{cursor:pointer;color:#3995ef}"],changeDetection:0})}return e})();var B=c(4664),h=c(9397),Z=c(8180);function x(e,r){if(1&e&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&e){const o=t.oxw().ngIf;t.xp6(1),t.hij("\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e: ",o.subtitle,"")}}const T=function(e,r){return{"add-to-cart-button":e,"remove-from-cart-button":r}};function A(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"div",1)(1,"button",2),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.toBackPage())}),t._uU(2,"<\u2014\u041d\u0430\u0437\u0430\u0434"),t.qZA(),t.TgZ(3,"div"),t._UZ(4,"img",3),t.qZA(),t.TgZ(5,"div",4)(6,"h1"),t._uU(7),t.qZA(),t.YNc(8,x,2,1,"p",5),t.TgZ(9,"div",6),t._uU(10),t.qZA(),t.TgZ(11,"a",7),t._uU(12,"\u041f\u043e\u043b\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),t.qZA(),t.TgZ(13,"button",8),t.NdJ("click",function(){const s=t.CHM(o).ngIf,n=t.oxw();return t.KtG(n.addToOrRemoveFromCart(s))}),t.qZA()()()}if(2&e){const o=r.ngIf;t.xp6(4),t.Q6J("src",o.image,t.LSH)("alt",o.title),t.xp6(3),t.Oqu(o.title),t.xp6(1),t.Q6J("ngIf",o.subtitle),t.xp6(2),t.hij("\u0426\u0435\u043d\u0430: ",o.price,""),t.xp6(1),t.Q6J("href",o.url,t.LSH),t.xp6(2),t.Q6J("ngClass",t.WLB(8,T,!o.isInCart,o.isInCart))("textContent",o.isInCart?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")}}const D=[{path:"",component:v},{path:":id",component:(()=>{class e{constructor(o,u,i,s,n){this.activatedRoute=o,this.booksDataService=u,this.cartService=i,this.router=s,this.location=n,this.book$=this.booksDataService.book$}ngOnInit(){this.activatedRoute.paramMap.pipe((0,B.w)(o=>o.getAll("id")),(0,h.b)(o=>this.booksDataService.getBookFromId(o).pipe((0,h.b)(u=>{u||this.router.navigate(["/main"])})).subscribe()),(0,Z.q)(1)).subscribe()}addToOrRemoveFromCart(o){o.isInCart?this.cartService.removeFromCart(o):this.cartService.addToCart(o),o.isInCart=!o.isInCart}toBackPage(){this.location.back()}static#t=this.\u0275fac=function(u){return new(u||e)(t.Y36(p.gz),t.Y36(k.s),t.Y36(m.N),t.Y36(p.F0),t.Y36(a.Ye))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-detail-book"]],decls:2,vars:3,consts:[["class","book",4,"ngIf"],[1,"book"],[1,"book-back-button",3,"click"],[1,"book-image",3,"src","alt"],[1,"book-block"],["class","book-subtitle",4,"ngIf"],[1,"book-price"],["target","_blank",1,"book-full-info",3,"href"],[1,"book-buy-button",3,"ngClass","textContent","click"],[1,"book-subtitle"]],template:function(u,i){1&u&&(t.YNc(0,A,14,11,"div",0),t.ALo(1,"async")),2&u&&t.Q6J("ngIf",t.lcZ(1,1,i.book$))},dependencies:[a.mk,a.O5,a.Ov],styles:[".book[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:row;column-gap:1.5rem}.book-back-button[_ngcontent-%COMP%]{align-self:start}.book-block[_ngcontent-%COMP%]{display:flex;align-items:start;justify-content:start;flex-direction:column;max-width:50%;row-gap:1rem}.book-image[_ngcontent-%COMP%]{max-height:22rem;max-width:19rem}.book-buy-button[_ngcontent-%COMP%]{width:300px;height:40px}"],changeDetection:0})}return e})()},{path:"**",redirectTo:"",pathMatch:"full"}];let E=(()=>{class e{static#t=this.\u0275fac=function(u){return new(u||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(D),p.Bz]})}return e})(),y=(()=>{class e{static#t=this.\u0275fac=function(u){return new(u||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({providers:[k.s],imports:[a.ez,E]})}return e})()}}]);