"use strict";(self.webpackChunkbooks=self.webpackChunkbooks||[]).push([[696],{9696:(k,m,r)=>{r.r(m),r.d(m,{CartModule:()=>T});var a=r(6814),l=r(9385),p=r(5619),C=r(9397),d=r(7398),t=r(4946),g=r(3781),h=r(3414);const f=function(o){return{"remove-from-cart-button":o}};function v(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr",6)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",7),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.toDetailPage(s.isbn13))}),t._UZ(4,"img",8),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td")(11,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.removeFromCart(s))}),t._uU(12),t.qZA()()()}if(2&o){const e=i.$implicit,n=i.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Q6J("src",e.image,t.LSH)("alt",e.title),t.xp6(1),t.hij(" ",e.title," "),t.xp6(2),t.hij(" ",e.subtitle," "),t.xp6(2),t.hij(" ",e.price," "),t.xp6(2),t.Q6J("ngClass",t.VKq(8,f,e.isInCart)),t.xp6(1),t.hij(" ","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b"," ")}}function _(o,i){if(1&o&&(t.TgZ(0,"table",4)(1,"tr")(2,"th"),t._uU(3,"#"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"\u0426\u0435\u043d\u0430"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"),t.qZA()(),t.YNc(12,v,13,10,"tr",5),t.TgZ(13,"tr"),t._UZ(14,"td")(15,"td")(16,"td"),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"async"),t.qZA()()()),2&o){const e=t.oxw().ngIf,n=t.oxw();t.xp6(12),t.Q6J("ngForOf",e),t.xp6(6),t.hij("\u0421\u0443\u043c\u043c\u0430: $",t.lcZ(19,2,n.totalSum$),"")}}function Z(o,i){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,_,20,4,"table",3),t.qZA()),2&o){const e=i.ngIf;t.oxw();const n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.length>0)("ngIfElse",n)}}function x(o,i){1&o&&(t.TgZ(0,"div"),t._uU(1,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"),t.qZA())}const b=[{path:"",component:(()=>{class o{constructor(e,n,u){this.booksDataService=e,this.cartService=n,this.router=u,this.totalSum$=new p.X(0),this.booksInCart$=this.cartService.booksInCart$.pipe((0,C.b)(s=>{let c=0;s.forEach(F=>{c+=parseFloat(F.price.replace("$",""))}),c=parseFloat(c.toFixed(2)),this.totalSum$.next(c)}))}ngOnInit(){this.cartService.getBooksInCart().subscribe()}toDetailPage(e){e&&this.router.navigate(["main",e])}removeFromCart(e){e&&(this.cartService.removeFromCart(e),this.totalSum$.pipe((0,d.U)(n=>(n-parseFloat(e.price.replace("$",""))).toFixed(2))))}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(g.s),t.Y36(h.N),t.Y36(l.F0))};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-cart"]],decls:4,vars:3,consts:[["class","cart",4,"ngIf"],["emptyCart",""],[1,"cart"],["class","cart-table",4,"ngIf","ngIfElse"],[1,"cart-table"],["class","cart-row",4,"ngFor","ngForOf"],[1,"cart-row"],[1,"book-title",3,"click"],["width","30px",3,"src","alt"],[3,"ngClass","click"]],template:function(n,u){1&n&&(t.YNc(0,Z,2,2,"div",0),t.ALo(1,"async"),t.YNc(2,x,2,0,"ng-template",null,1,t.W1O)),2&n&&t.Q6J("ngIf",t.lcZ(1,1,u.booksInCart$))},dependencies:[a.mk,a.sg,a.O5,a.Ov],styles:[".cart[_ngcontent-%COMP%]{margin:0 auto;display:flex;align-items:center;justify-content:center;flex-direction:column;max-width:90rem}.book-title[_ngcontent-%COMP%]:hover{cursor:pointer;color:#3995ef}"],changeDetection:0})}return o})()}];let A=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(b),l.Bz]})}return o})(),T=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#o=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[a.ez,A]})}return o})()}}]);